<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Service</title><link rel="stylesheet" href="style.css.gz"><script type="text/javascript" src="http://git.codedevice.ru/js/service.js"></script><style>h3{padding:1rem}p{margin:0}.m-body{overflow:scroll;height:300px;padding-top:5px;border:1px solid #a0a0a0;border-radius:5px;margin:15px 20px}.m-head h3{margin:0;padding:0 30px}.warn{border-left:5px solid #dc7272;padding:10px;display:inherit;margin-bottom:10px}</style></head><body><div id="loader" class="loader hide"></div><div id="sideNav" class="sidenav"><span href="javascript:void(0)" class="close" onclick='document.getElementById("sideNav").classList.toggle("open")'>&times;</span><div class="in"></div><a href="http://dot.codedevice.ru/example/" target="_blank">Example css</a> <a href="https://github.com/bondrogeen/dot" target="_blank">GitHub</a> <a href="http://dot.codedevice.ru" target="_blank">DOT</a></div><ul class="nav fix info" id="topNav"><li><a href="index.html" class="brand">DOT</a></li><li><a href="settings.html">Settings</a></li><li><a href="service.html">Service</a></li><li class="-exit"><a href="#" id="btn_exit" onclick="logout()">Exit</a></li><li class="-icon"><a href="#" onclick='document.getElementById("topNav").classList.toggle("res")'>&equiv;</a></li></ul><div id="Modal" class="modal hide"><div class="m-cont"><div class="m-head"><span class="close" id="close_m" onclick="mClose()">&times;</span><h3 class="m-info">Update</h3></div><div class="m-body"><p id="m-text"></p></div><div class="m-foo"><button id="start" class="info" onclick='startLoad("web-server")'>Start</button> <button id="close" class="info" onclick="mClose()">Close</button> <button id="reboot" class="danger hide" onclick="reboot()">Reboot</button></div></div></div><div id="cont" class="cont"><div class="row"><div class="s12 of-m2 m10 of-l2 l8"><h3>Plugins</h3><div id="plugins" class="row"></div></div></div></div><script>function send(e,t,i){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.addEventListener("load",function(){o.status<400?i(o.responseText):i(!1)}),o.send(JSON.stringify(t))}function id(e){return document.getElementById(e)}function loading(e,t){var i={host:"git.codedevice.ru",port:80};i.path="/files/"+e+"/",i.file="index.php",i.init="upload",send("web_get.lua",i,function(e){console.log(e),"true"===e?(t("load"),setTimeout(function(){send("temp_get.txt",{},function(e){t(e),localStorage.clear()})},15e3)):t(!1)})}function startLoad(e){id("m-text").innerHTML="Start of update <br/>",loading(e,function(e){"load"===e?(id("loader").classList.remove("hide"),id("m-text").innerHTML+="Loading ... wait<br>"):e?(id("loader").classList.add("hide"),id("start").classList.add("hide"),id("m-text").innerHTML+=e.replace(/\n/g,"<br />"),id("close").innerHTML="Done",id("reboot").classList.remove("hide")):id("m-text").innerHTML+="Loading error<br/>"})}function update(){id("Modal").classList.remove("hide")}function mClose(){id("Modal").classList.add("hide"),id("close").innerHTML="Close",id("reboot").classList.add("hide"),id("start").classList.remove("hide")}function reboot(){id("loader").classList.remove("hide"),mClose(),send("web_control.lua",{init:"reboot"},function(e){setTimeout(function(){location.href="/"},1e4)})}function logout(){document.cookie="id=",location.href="/login.html"}</script></body></html>
