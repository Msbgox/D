local a={ssid="DoT-"..string.format("%x",node.chipid()*256):sub(0,6):upper(),pwd="",mode=3,login="admin",pass="0000"}local function b(c)local d,e;if file.open(c,"r")then d,e=pcall(sjson.decode,file.read())file.close()end;return e end;local function f(g)local h=b("setting.json")h=h and g==1 and h or a;h.token=tostring(node.random(100000))return h end;local function i(j)local c,k;for l,m in pairs(file.list())do if l:match(j.ext and"(.*)%."..j.ext or j.name.."%.[rn][ue][nt]$")then c=b(l:match("(.*)%.")..".init")if l and c then c.run=j.name and true or c.run;c,k=pcall(dofile(l),c)end end end;return k end;local function n(j)if type(j)=="table"then for o,m in pairs(j)do print(m)file.remove(m)end else file.remove(j)end;return j end;local function p(j)local q,r,s=b(j.Fname)if q then for l,m in pairs(q)do q[l]=j[l]==nil and m or j[l]end;r,s=pcall(sjson.encode,q)print(s)if r and file.open(j.Fname,"w")then file.write(s)file.close()end end;return r end;return function(j)local t;if type(j)=="table"then if j.run then t=i(j.run)end;if j.list then t=file.list()end;if j.init then t=b(j.init)end;if j.save then t=p(j.save)end;if j.del then t=n(j.del)end else t=f(j)end;return t end
